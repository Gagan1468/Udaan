<script>
  function toggleForm() {
    const form = document.getElementById("counsellorForm");
    form.style.display = form.style.display === "block" ? "none" : "block";
  }

  document.getElementById('contact-form').addEventListener('submit', function(e) {
    e.preventDefault();

    emailjs.sendForm('service_t5nedk8', 'template_66d7oru', this)
      .then(function(response) {
        console.log('SUCCESS!', response.status, response.text);
        document.getElementById("successMessage").style.display = "block";
        document.getElementById("contact-form").reset();
      }, function(error) {
        alert('FAILED to send message. Please try again.');
        console.log('FAILED...', error);
      });
  });

  window.onload = function () {
    const isLoggedIn = localStorage.getItem('prernaLoggedIn');
    const profile = JSON.parse(localStorage.getItem('prernaProfile'));

    if (isLoggedIn === 'true') {
      document.getElementById('authLinks').style.display = 'none';
      document.querySelector('.dropdown').style.display = 'block'; // show 3 dots menu

      if (profile) {
        document.getElementById('profileName').value = profile.name || '';
        document.getElementById('profileEmail').value = profile.email || '';
        document.getElementById('profilePhone').value = profile.phone || '';
      }
    } else {
      document.querySelector('.dropdown').style.display = 'none'; // hide 3 dots
    }
  };

  function toggleProfileBox() {
    const box = document.getElementById('profileBox');
    box.style.display = box.style.display === 'none' ? 'block' : 'none';
  }

  function saveProfile() {
    const name = document.getElementById('profileName').value;
    const email = document.getElementById('profileEmail').value;
    const phone = document.getElementById('profilePhone').value;
    const updatedProfile = { name, email, phone };
    localStorage.setItem('prernaProfile', JSON.stringify(updatedProfile));
    alert('Profile updated successfully âœ…');
    document.getElementById('profileBox').style.display = 'none';
  }

  function logoutUser() {
    localStorage.removeItem('prernaLoggedIn');
    localStorage.removeItem('prernaProfile');
    location.reload();
  }

  function toggleMenu() {
    const menu = document.getElementById("dropdown-content");
    menu.style.display = (menu.style.display === "block") ? "none" : "block";
  }
</script>
